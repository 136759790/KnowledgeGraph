# 秒杀场景
> 秒杀是典型的短时间内大量突发访问。
## 特点
+ 短时间内大量并发
+ 购买量远远大于库存量
+ 业务程序简单，下单，减库存，该订单状态。
    1. 前端页面，客户通过发送http请求下单。
    1. action 处理数据调用，接口生成订单。
    1. 更新库存更新订单
## 架构思想
+ 限流
~~~
只有少部分请求有效，所以要将大批流量限制到前端，不能走到后端。
~~~
+ 削峰
~~~
瞬时高峰会压垮服务器，所以要削峰，常用手段有缓存和消息中间件。
~~~
+ 异步处理
~~~
异步处理提高并发量。
~~~
+ 内存缓存
~~~
数据库读写属于磁盘IO性能很低，所以需要在内存中处理业务逻辑。
~~~
## 问题
+ 前端处理
> 访问量骤增，流量变大，不能将请求都转给服务器。
~~~
1. 增加验证码，减少用户请求数，防脚本。
2. 尽量静态化，CDN分流。
3. 验证码+按钮置灰防止重复提交。 
~~~  
+ 后端处理
> 请求多，无效请求占多数，数据库读写锁冲突严重，响应超时。
~~~
1. 
~~~
